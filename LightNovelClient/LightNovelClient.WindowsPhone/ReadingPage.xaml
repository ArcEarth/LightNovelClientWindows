<Page x:Class="LightNovel.ReadingPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:controls="using:LightNovel.Controls"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:data="using:LightNovel.Data"
      xmlns:extention="using:WinRTXamlToolkit.Controls.Extensions"
      xmlns:local="using:LightNovel"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:service="using:LightNovel.Service"
      xmlns:toolkit="using:WinRTXamlToolkit.Controls"
      x:Name="pageRoot"
      DataContext="{Binding ViewModel,
                            RelativeSource={RelativeSource Self}}"
      NavigationCacheMode="Required"
      mc:Ignorable="d">
    <Page.Resources>
        <!--  Collection of items displayed by this page  -->
        <CollectionViewSource x:Name="VolumesViewSource"
                              IsSourceGrouped="True"
                              Source="{Binding Index}" />

        <QuadraticEase x:Key="QuadraticEaseOut" EasingMode="EaseOut" />
        <QuadraticEase x:Key="QuadraticEaseInOut" EasingMode="EaseInOut" />
        <Storyboard x:Key="LayoutRootFadeinStory" x:Name="LayoutRootFadeinStory">
            <FadeInThemeAnimation Storyboard.TargetName="LayoutRoot" TargetName="LayoutRoot" />
        </Storyboard>
        <local:BooleanToSymbolConverter x:Key="IsPinnedToSymbolConverter"
                                        FalseSymbol="Pin"
                                        TrueSymbol="UnPin" />

        <DataTemplate x:Key="LineViewCCGTemplate" x:Name="LineViewCCGTemplate">
            <Grid HorizontalAlignment="Stretch">
                <ProgressBar x:Name="ProgressBar"
                             Margin="20,5"
                             HorizontalAlignment="Stretch"
                             VerticalAlignment="Stretch"
                             Background="{ThemeResource AppAccentBrushLight}"
                             Foreground="{ThemeResource AppAccentBrush}"
                             Maximum="100"
                             Minimum="0"
                             Value="0" 
                             Visibility="Collapsed" />
                <Path x:Name="ImagePlaceHolder"
                      Margin="20,5" Visibility="Collapsed" 
                      HorizontalAlignment="Stretch"
                      Height="440" Fill="{ThemeResource ContentBackgroundBrush}" Stretch="Fill"  Data="M 19.324219 13.378906 L 19.324219 62.15625 L 59.089844 62.15625 L 59.089844 13.378906 L 19.324219 13.378906 z M 22.300781 15.90625 L 56.300781 15.90625 L 56.300781 59.90625 L 22.300781 59.90625 L 22.300781 15.90625 z M 25.300781 18.90625 L 25.300781 56.90625 L 53.300781 56.90625 L 53.300781 18.90625 L 25.300781 18.90625 z M 27.300781 20.90625 L 34.966797 20.90625 C 35.096997 21.41225 35.384766 22.277419 35.384766 22.824219 C 35.384766 26.322019 32.548581 29.15625 29.050781 29.15625 C 28.503981 29.15625 27.806781 29.03645 27.300781 28.90625 L 27.300781 20.90625 z M 43.216797 38.740234 L 47.966797 43.490234 L 51.300781 39.90625 L 51.300781 54.90625 L 27.300781 54.90625 L 43.216797 38.740234 z "></Path>

                <Image x:Name="ImageContent"
                       Margin="0,5"
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Center"
                       ImageFailed="ImageContent_Failed"
                       Stretch="Uniform" />

                <TextBlock x:Name="TextContent"
                           Margin="12,2,6,2"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Center"
                           FontFamily="{Binding FontFamily,
                                                ElementName=ContentListView}"
                           FontSize="{Binding FontSize,
                                              ElementName=ContentListView}"
                           FontWeight="SemiLight"
                           Foreground="{Binding Foreground,
                                                ElementName=ContentListView}"
                           TextAlignment="Left"
                           TextWrapping="Wrap" />
                <Rectangle x:Name="CommentIndicator"
                           Width="5"
                           HorizontalAlignment="Left"
                           Fill="{ThemeResource AppAccentBrush}" />
            </Grid>
        </DataTemplate>

        <Flyout x:Key="CommentsFlyout"
                x:Name="CommentsFlyout"
                Placement="Top">
            <Grid Height="250">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="auto" />
                </Grid.RowDefinitions>
                <!--  Comment Tools  -->
                <Grid x:Name="CommentsTool" Margin="0,0,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="auto" />
                    </Grid.RowDefinitions>
                    <TextBlock x:Uid="NoCommentLabel"
                               Grid.Row="0"
                               Margin="5"
                               FontSize="{ThemeResource AppFontSizeMedium}"
                               Foreground="{ThemeResource AppForegroundBrush}"
                               Style="{ThemeResource AppTextAccentStyle}"
                               TextWrapping="WrapWholeWords"
                               Visibility="{Binding HasNoComment,
                                                    Converter={StaticResource BooleanToVisibilityConverter}}">
                        Send the first comment.
                    </TextBlock>
                    <ProgressBar Grid.Row="0"
                                 Margin="0,0,0,5"
                                 VerticalAlignment="Top"
                                 Foreground="{ThemeResource AppAccentBrush}"
                                 IsIndeterminate="True"
                                 Visibility="{Binding IsLoading,
                                                      Converter={StaticResource BooleanToVisibilityConverter}}" />
                    <ListView Grid.Row="0"
                              MaxHeight="250"
                              ItemsSource="{Binding Comments}"
                              Visibility="{Binding IsLoading,
                                                   Converter={StaticResource BooleanToVisibilityReverseConverter}}">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock MaxWidth="350"
                                           FontSize="{ThemeResource AppFontSizeNormal}"
                                           FontWeight="SemiBold"
                                           Foreground="{ThemeResource AppForegroundBrush}"
                                           Text="{Binding Content}"
                                           TextWrapping="WrapWholeWords" />
                            </DataTemplate>
                        </ListView.ItemTemplate>
                        <ListView.ItemContainerStyle>
                            <Style TargetType="ListViewItem">
                                <Setter Property="VerticalContentAlignment" Value="Center" />
                                <Setter Property="HorizontalContentAlignment" Value="Left" />
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="ListViewItem">
                                            <ContentPresenter x:Name="contentPresenter"
                                                              Margin="{TemplateBinding Padding}"
                                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                              Content="{TemplateBinding Content}"
                                                              ContentTemplate="{TemplateBinding ContentTemplate}"
                                                              ContentTransitions="{TemplateBinding ContentTransitions}" />
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>

                            </Style>
                        </ListView.ItemContainerStyle>
                    </ListView>
                    <Grid x:Name="CommentsInputTool"
                          Grid.Row="1"
                          Margin="5,0">
                        <TextBox x:Uid="CommentInputBox"
                                 x:Name="CommentInputBox"
                                 HorizontalAlignment="Stretch"
                                 VerticalAlignment="Stretch"
                                 Padding="5"
                                 VerticalContentAlignment="Center"
                                 Background="{ThemeResource AppBackgroundDimBrush}"
                                 BorderBrush="{ThemeResource TransparentBrush}"
                                 BorderThickness="1"
                                 FontSize="{ThemeResource AppFontSizeMedium}"
                                 FontWeight="Light"
                                 KeyDown="CommentInputBox_KeyDown"
                                 MaxLength="300"
                                 PlaceholderText="Input comment here"
                                 TabIndex="2" />
                        <Button x:Uid="SubmmitButton"
                                Margin="0"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Center"
                                Background="{ThemeResource AppAccentBrush}"
                                BorderBrush="{ThemeResource TransparentBrush}"
                                BorderThickness="1"
                                Click="CommentSubmitButton_Click"
                                Foreground="{ThemeResource AppBackgroundBrush}"
                                Padding="0"
                                TabIndex="1">
                            <Viewbox Width="40"
                                     Height="40"
                                     HorizontalAlignment="Center"
                                     VerticalAlignment="Center">
                                <SymbolIcon Margin="10" Symbol="PostUpdate" />
                            </Viewbox>
                        </Button>
                    </Grid>
                </Grid>


                <!--  Image Tools  -->
                <Grid Grid.Row="1"
                      Height="50"
                      Margin="0"
                      Visibility="{Binding IsImage,
                                           Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                        <ColumnDefinition x:Name="ImageRefreshColumn" Width="*" />
                    </Grid.ColumnDefinitions>
                    <!--<TextBlock  x:Uid="PictureToolLabel" VerticalAlignment="Center" HorizontalAlignment="Left" FontWeight="SemiBold" Margin="5" FontSize="{ThemeResource AppFontSizeMedium}" Foreground="{ThemeResource AppAccentBrush}">Picture</TextBlock>-->
                    <Button x:Uid="ImageDownloadButton"
                            Grid.Column="0"
                            MinHeight="60"
                            Margin="5,0,5,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"
                            Background="{ThemeResource AppAccentBrush}"
                            BorderBrush="{ThemeResource TransparentBrush}"
                            BorderThickness="0"
                            Click="IllustrationSaveButton_Click"
                            Foreground="{ThemeResource AppAccentBrush}"
                            Padding="0">
                        <Viewbox HorizontalAlignment="Stretch"
                                 VerticalAlignment="Stretch"
                                 Stretch="Uniform">
                            <SymbolIcon Margin="3"
                                        Foreground="{ThemeResource AppBackgroundBrush}"
                                        Symbol="Download" />
                        </Viewbox>
                    </Button>
                    <Button x:Uid="ImageRefreshButton"
                            x:Name="ImageRefreshButton"
                            Grid.Column="3"
                            MinHeight="60"
                            Margin="5,0,5,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"
                            Background="{ThemeResource AppAccentBrush}"
                            BorderBrush="{ThemeResource TransparentBrush}"
                            BorderThickness="0"
                            Click="IllustrationRefreshButton_Click"
                            Foreground="{ThemeResource AppAccentBrush}"
                            Padding="0">
                        <Viewbox HorizontalAlignment="Stretch"
                                 VerticalAlignment="Stretch"
                                 Stretch="Uniform">
                            <SymbolIcon Margin="3"
                                        Foreground="{ThemeResource AppBackgroundBrush}"
                                        Symbol="Refresh" />
                        </Viewbox>
                    </Button>
                    <Button x:Uid="ImageSetCoverButton"
                            x:Name="ImageSetCoverButton"
                            Grid.Column="2"
                            MinHeight="60"
                            Margin="5,0,5,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"
                            Background="{ThemeResource AppAccentBrush}"
                            BorderBrush="{ThemeResource TransparentBrush}"
                            BorderThickness="0"
                            Visibility="Collapsed"
                            Click="ImageSetCoverButton_Click"
                            Foreground="{ThemeResource AppAccentBrush}"
                            Padding="0">
                        <Path Margin="0,7,0,4"
                              Data="F1 M 30.5,38L 22.75,30L 27.5,30L 35.5,38L 27.5,46L 22.75,46L 30.5,38 Z M 18,29.75L 26.25,38L 18,46.25L 18,29.75 Z M 28,25L 58,25L 58,51L 28,51L 28,47.25L 31,44.25L 31,48L 55,48L 55,28L 31,28L 31,31.75L 28,28.75L 28,25 Z M 34,46L 37.1667,41.1667L 40.3333,44.3333L 48.25,36.4167L 51.4166,39.5834L 53,36.5L 53,46L 34,46 Z M 38.75,31.6667C 38.75,33.7164 37.3177,35.5468 35.4306,36.1806L 33,33.75L 33,30L 38.75,30.0834C 38.8447,30.4514 38.75,31.2691 38.75,31.6667 Z "
                              Fill="{ThemeResource AppBackgroundBrush}"
                              Stretch="Uniform" />
                    </Button>
                    <Button x:Uid="ImageFullScreenButton"
                            Grid.Column="1"
                            MinHeight="60"
                            Margin="5,0,5,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            HorizontalContentAlignment="Stretch"
                            VerticalContentAlignment="Stretch"
                            Background="{ThemeResource AppAccentBrush}"
                            BorderBrush="{ThemeResource TransparentBrush}"
                            BorderThickness="0"
                            Click="IllustrationFullScreenButton_Click"
                            Foreground="{ThemeResource AppBackgroundBrush}"
                            Padding="0">
                        <Viewbox HorizontalAlignment="Stretch"
                                 VerticalAlignment="Stretch"
                                 Stretch="Uniform">
                            <SymbolIcon Margin="3"
                                        Foreground="{ThemeResource AppBackgroundBrush}"
                                        Symbol="FullScreen" />
                        </Viewbox>
                    </Button>
                </Grid>
            </Grid>
            <Flyout.FlyoutPresenterStyle>
                <Style TargetType="FlyoutPresenter">
                    <Setter Property="RequestedTheme" Value="{Binding RequestedTheme, ElementName=pageRoot}" />
                    <Setter Property="ScrollViewer.ZoomMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="True" />
                    <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False" />
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled" />
                    <Setter Property="Background" Value="{StaticResource AppSemitransparentBrush}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource AppAccentBrush}" />
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Padding" Value="5,0,5,5" />
                </Style>
            </Flyout.FlyoutPresenterStyle>
        </Flyout>
        <Flyout x:Key="ImagePreviewFlyout"
                x:Name="ImagePreviewFlyout"
                Placement="Full">
            <!--  The DataContext of the Image that the flyout is attached to must be the Image's Source.  -->
            <Image Source="{Binding Path=Content}" Stretch="Uniform" />
            <!--<Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>
                <ScrollViewer Grid.Column="0"
                              IsHorizontalScrollChainingEnabled="True"
                              IsVerticalScrollChainingEnabled="False"
                              IsZoomChainingEnabled="False"
                              ZoomMode="Enabled">
                    <Image Source="{Binding Path=Source}" Stretch="Uniform" />
                </ScrollViewer>
                <Border Grid.Column="1"
                        Width="48"
                        HorizontalAlignment="Left"
                        VerticalAlignment="Top"
                        Background="{ThemeResource TransparentBrush}"
                        BorderThickness="0"
                        Padding="0">
                    <AppBarButton Margin="-22,5,0,0"
                                  HorizontalAlignment="Right"
                                  Background="{ThemeResource AppAccentBrush}"
                                  BorderBrush="{ThemeResource AppAccentBrush}"
                                  Click="IllustrationSaveButton_Click"
                                  FontWeight="SemiBold"
                                  Foreground="{ThemeResource AppBackgroundBrush}"
                                  Icon="SaveLocal"
                                  Label="Save"
                                  Opacity="1.0" />
                </Border>
            </Grid>-->
            <Flyout.FlyoutPresenterStyle>
                <Style TargetType="FlyoutPresenter">
                    <Setter Property="RequestedTheme" Value="{Binding RequestedTheme, ElementName=pageRoot}" />
                    <Setter Property="ScrollViewer.ZoomMode" Value="Enabled" />
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Auto" />
                    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Auto" />
                    <!--<Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="False" />
                    <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False" />-->
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
                    <Setter Property="Background" Value="{StaticResource AppSemitransparentBrush}" />
                    <Setter Property="BorderBrush" Value="Transparent" />
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Padding" Value="5" />
                </Style>
            </Flyout.FlyoutPresenterStyle>
        </Flyout>



        <MenuFlyout x:Key="FontSizeFlyout">
            <MenuFlyout.MenuFlyoutPresenterStyle>
                <Style TargetType="MenuFlyoutPresenter">
                    <Setter Property="RequestedTheme" Value="{Binding RequestedTheme, ElementName=pageRoot}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource AppAccentBrushSemiLight}" />
                </Style>
            </MenuFlyout.MenuFlyoutPresenterStyle>
            <MenuFlyoutItem x:Uid="SubtleFontSizeButton"
                            Click="FontSizeButton_Click"
                            FontSize="{ThemeResource AppFontSizeSmall}"
                            FontWeight="SemiLight"
                            Text="Subtle" />
            <MenuFlyoutItem x:Uid="SmallFontSizeButton"
                            Click="FontSizeButton_Click"
                            FontSize="{ThemeResource AppFontSizeNormal}"
                            FontWeight="SemiLight"
                            Text="Small" />
            <MenuFlyoutItem x:Uid="NormalFontSizeButton"
                            Click="FontSizeButton_Click"
                            FontSize="{ThemeResource AppFontSizeMedium}"
                            FontWeight="Light"
                            Text="Normal" />
            <MenuFlyoutItem x:Uid="LargeFontSizeButton"
                            Click="FontSizeButton_Click"
                            FontSize="{ThemeResource AppFontSizeMediumLarge}"
                            FontWeight="Light"
                            Text="Large" />
            <MenuFlyoutItem x:Uid="HugeFontSizeButton"
                            Click="FontSizeButton_Click"
                            FontSize="{ThemeResource AppFontSizeLarge}"
                            FontWeight="Light"
                            Text="Huge" />
        </MenuFlyout>
        <MenuFlyout x:Key="FontStyleFlyout">
            <MenuFlyout.MenuFlyoutPresenterStyle>
                <Style TargetType="MenuFlyoutPresenter">
                    <Setter Property="RequestedTheme" Value="{Binding RequestedTheme, ElementName=pageRoot}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource AppAccentBrushSemiLight}" />
                </Style>
            </MenuFlyout.MenuFlyoutPresenterStyle>

            <!--<MenuFlyoutItem x:Uid="SegoeFontButton"
                                            Click="FontSizeButton_Click"
                                            FontFamily="Segoe WP SemiLight"
                                            Text="MV Boli" />
                            <MenuFlyoutItem x:Uid="BoliFontButton"
                                            Click="FontSizeButton_Click"
                                            FontFamily="MV Boli"
                                            Text="MV Boli" />
                            <MenuFlyoutItem x:Uid="LucidaFontButton"
                                            Click="FontSizeButton_Click"
                                            FontFamily="Lucida Handwriting"
                                            Text="Lucida" />-->
            <MenuFlyoutItem x:Uid="SegoeFontButton"
                            Click="FontStyleButton_Click"
                            FontFamily="SimSun"
                            Language="zh-Hans"
                            Text="宋体" />
            <MenuFlyoutItem x:Uid="LucidaFontButton"
                            Click="FontStyleButton_Click"
                            Language="zh-Hans"
                            Text="默认" />
        </MenuFlyout>
        <MenuFlyout x:Key="ReadingThemeFlyout">
            <MenuFlyout.MenuFlyoutPresenterStyle>
                <Style TargetType="MenuFlyoutPresenter">
                    <Setter Property="RequestedTheme" Value="{Binding RequestedTheme, ElementName=pageRoot}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource AppAccentBrushSemiLight}" />
                </Style>
            </MenuFlyout.MenuFlyoutPresenterStyle>

            <MenuFlyoutItem x:Uid="AutomaticThemeItem"
                            x:Name="AutomaticThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Click="ReadingThemButton_Click"
                            Text="Auto" />
            <MenuFlyoutItem x:Uid="DarkThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Background="Black"
                            Click="ReadingThemButton_Click"
                            Foreground="White"
                            Padding="0"
                            Text="Dark" />
            <MenuFlyoutItem x:Uid="DarkGrayThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Background="DarkGray"
                            Click="ReadingThemButton_Click"
                            Foreground="Black"
                            Padding="0"
                            Text="Dark Gray" />
            <MenuFlyoutItem x:Uid="LightGrayThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Background="LightGray"
                            Click="ReadingThemButton_Click"
                            Foreground="Black"
                            Padding="0"
                            Text="Light Gray" />
            <MenuFlyoutItem x:Uid="GreenThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Background="#FFD1E6B1"
                            Click="ReadingThemButton_Click"
                            Foreground="Black"
                            Padding="0"
                            Text="Mild Green" />
            <MenuFlyoutItem x:Uid="SepiaThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Background="#FFFCF5E8"
                            Click="ReadingThemButton_Click"
                            Foreground="Black"
                            Padding="0"
                            Text="Sepia" />
            <MenuFlyoutItem x:Uid="LightThemeItem"
                            Height="60"
                            Margin="-20,0,0,0"
                            HorizontalContentAlignment="Center"
                            Background="White"
                            Click="ReadingThemButton_Click"
                            Foreground="Black"
                            Padding="0"
                            Text="Light" />
        </MenuFlyout>
        <Flyout x:Key="JumpToFlyout" Placement="Bottom">
            <Grid>
                <TextBox x:Uid="JumpToInputBox"
                         x:Name="JumpToInputBox"
                         Grid.Row="1"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Stretch"
                         VerticalContentAlignment="Center"
                         Background="{ThemeResource AppBackgroundDimBrush}"
                         BorderBrush="{ThemeResource TransparentBrush}"
                         BorderThickness="1"
                         FontSize="{ThemeResource AppFontSizeMedium}"
                         FontWeight="Light"
                         Foreground="{ThemeResource AppForegroundBrush}"
                         KeyDown="JumpToInputBox_KeyDown"
                         MaxLength="300"
                         PlaceholderText="Line No or Keyword"
                         TabIndex="2" />
                <Button x:Uid="JumpToButton"
                        Grid.Row="1"
                        Margin="0"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Background="{ThemeResource AppAccentBrush}"
                        BorderBrush="{ThemeResource TransparentBrush}"
                        BorderThickness="1"
                        Click="JumpToButton_Click"
                        Foreground="{ThemeResource AppBackgroundBrush}"
                        Padding="0"
                        TabIndex="1">
                    <Viewbox Width="40"
                             Height="40"
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center">
                        <SymbolIcon Margin="10" Symbol="Forward" />
                    </Viewbox>
                </Button>
            </Grid>
            <Flyout.FlyoutPresenterStyle>
                <Style TargetType="FlyoutPresenter">
                    <Setter Property="RequestedTheme" Value="{Binding RequestedTheme, ElementName=pageRoot}" />
                    <Setter Property="ScrollViewer.ZoomMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.VerticalScrollMode" Value="Disabled" />
                    <Setter Property="ScrollViewer.IsHorizontalScrollChainingEnabled" Value="True" />
                    <Setter Property="ScrollViewer.IsHorizontalRailEnabled" Value="False" />
                    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled" />
                    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Disabled" />
                    <Setter Property="Background" Value="{StaticResource AppSemitransparentBrush}" />
                    <Setter Property="BorderBrush" Value="{ThemeResource AppAccentBrush}" />
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Padding" Value="5,5,5,5" />
                </Style>
            </Flyout.FlyoutPresenterStyle>

        </Flyout>
    </Page.Resources>
    <Page.BottomAppBar>
        <CommandBar x:Name="PageBottomCommandBar"
                    Background="{ThemeResource AppAccentBrush}"
                    BorderBrush="Transparent"
                    BorderThickness="0"
                    Closed="PageBottomCommandBar_IsOpenChanged"
                    ClosedDisplayMode="Minimal"
                    Foreground="{ThemeResource AppBackgroundBrush}"
                    IsOpen="{Binding IsLoading,
                                     Converter={StaticResource BooleanNegationConverter}}"
                    Opened="PageBottomCommandBar_IsOpenChanged"
                    RequestedTheme="{Binding RequestedTheme,
                                             ElementName=pageRoot}">
            <CommandBar.PrimaryCommands>
                <!--<AppBarSeparator Foreground="{ThemeResource AppBackgroundBrush}" />-->
                <!--<AppBarSeparator Foreground="{ThemeResource AppBackgroundBrush}" />-->
                <!--<AppBarButton x:Uid="OpenInNewViewButton"
                              x:Name="OpenInNewViewButton"
                              Click="OpenInNewViewButton_Click"
                              Icon="NewWindow"
                              Label="New Window" />-->
                
                <AppBarToggleButton x:Uid="FullScreenButton"
                                    x:Name="FullScreenButton"
                                    Margin="0,0"
                                    VerticalAlignment="Center"
                                    BorderBrush="Transparent"
                                    Foreground="{ThemeResource AppBackgroundBrush}"
                                    Icon="FullScreen"
                                    IsChecked="{Binding IsFullScreen,
                                                        Mode=TwoWay}"
                                    IsCompact="False"
                                    Label="Full Screen"
                                    Padding="0"
                                    ToolTipService.ToolTip="Toggle if enable the comments in reading" />

                <AppBarToggleButton x:Uid="CommentEnableButton"
                                    x:Name="CommentEnableButton"
                                    Margin="0,0"
                                    VerticalAlignment="Center"
                                    BorderBrush="Transparent"
                                    Foreground="{ThemeResource AppBackgroundBrush}"
                                    Icon="Comment"
                                    IsChecked="{Binding EnableComments,
                                                        Mode=TwoWay}"
                                    IsCompact="False"
                                    Label="Comments"
                                    Padding="0"
                                    ToolTipService.ToolTip="Toggle if enable the comments in reading" />
                <!--<AppBarSeparator Foreground="{ThemeResource AppBackgroundBrush}" />-->
                <AppBarToggleButton x:Uid="FavoriteButton"
                                    x:Name="FavoriteButton"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    BorderBrush="Transparent"
                                    Click="BookmarkButton_Click"
                                    Foreground="{StaticResource AppBackgroundBrush}"
                                    Icon="Favorite"
                                    IsChecked="{Binding IsFavored}"
                                    IsCompact="False"
                                    Label="Favrite"
                                    ToolTipService.ToolTip="Bookmark current page" />
                <AppBarToggleButton x:Uid="PinButton"
                                    x:Name="PinButton"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    BorderBrush="Transparent"
                                    Click="PinButton_Click"
                                    Foreground="{StaticResource AppBackgroundBrush}"
                                    Icon="Pin"
                                    IsChecked="{Binding IsPinned}"
                                    IsCompact="False"
                                    Label="Pin"
                                    ToolTipService.ToolTip="Pin this page to Start" />
            </CommandBar.PrimaryCommands>
            <!--  Download and manual layout function not enabled in this build  -->
            <CommandBar.SecondaryCommands>
                <AppBarButton x:Uid="ShareButton"
                              x:Name="ShareButton"
                              Grid.Column="1"
                              Margin="0,-8" 
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="ShareButton_Click"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              IsCompact="False"
                              Label="Share">
                    <Viewbox Margin="0">
                        <Canvas x:Name="appbar_share"
                                Width="76"
                                Height="76">
                            <Path Canvas.Left="12.6667"
                                  Canvas.Top="15.8333"
                                  Width="47.5"
                                  Height="44.3333"
                                  Data="F1 M 19,31.6667C 22.4978,31.6667 25.3333,34.5022 25.3333,38C 25.3333,40.0017 24.4047,41.7865 22.9548,42.9471C 24.9536,49.0304 30.5383,53.4894 37.2083,53.8333C 37.2083,56.2887 38.2245,58.5067 39.8593,60.0898L 38,60.1667C 27.79,60.1667 19.1923,53.2639 16.619,43.8706C 14.3012,42.9295 12.6667,40.6557 12.6667,38C 12.6667,34.5022 15.5022,31.6667 19,31.6667 Z M 45.125,15.8333C 48.6228,15.8333 51.4583,18.6689 51.4583,22.1667C 51.4583,25.6645 48.6228,28.5 45.125,28.5C 41.6337,28.5 38.8022,25.675 38.7917,22.1861C 38.5294,22.1732 38.2655,22.1667 38,22.1667C 31.8493,22.1667 26.5178,25.6738 23.896,30.7973C 22.5009,29.8471 20.8153,29.2917 19,29.2917L 17.559,29.4103C 20.9149,21.4339 28.8034,15.8333 38,15.8333C 39.6024,15.8333 41.165,16.0034 42.6709,16.3263C 43.4256,16.0088 44.2548,15.8333 45.125,15.8333 Z M 45.9167,47.5C 47.3141,47.5 48.6058,47.9526 49.6532,48.7191C 52.2485,45.8991 53.8333,42.1347 53.8333,38C 53.8333,34.5408 52.724,31.3407 50.8417,28.736C 52.6012,27.2036 53.7393,24.9758 53.8278,22.4809C 57.7488,26.4794 60.1667,31.9574 60.1667,38C 60.1667,44.8738 57.0379,51.0169 52.1268,55.0828C 51.5466,57.9822 48.9868,60.1667 45.9167,60.1667C 42.4189,60.1667 39.5833,57.3311 39.5833,53.8333C 39.5833,50.3355 42.4189,47.5 45.9167,47.5 Z "
                                  Fill="{ThemeResource AppBackgroundBrush}"
                                  Stretch="Fill"
                                  Stroke="{ThemeResource AppBackgroundBrush}" />
                        </Canvas>
                    </Viewbox>
                </AppBarButton>
                <AppBarButton x:Uid="DownloadButton"
                              x:Name="DownloadButton"
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="DownloadButton_Click"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              Icon="Download"
                              IsCompact="False"
                              Label="Make aviable offline"
                              Margin="0,-8" />
                <AppBarButton x:Uid="FontSizeButton"
                              x:Name="FontSizeButton"
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="FontSizeButtonClick"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              Icon="FontSize"
                              IsCompact="False"
                              Label="Font Size"
                              Margin="0,-8" />
                <AppBarButton x:Uid="FontFamilyButton"
                              x:Name="FontFamilyButton"
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="FontFamilyButtonClick"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              Icon="Font"
                              IsCompact="False"
                              Label="Font Style"
                              Margin="0,-8"/>
                <AppBarButton x:Uid="ReadingStyleButton"
                              x:Name="ReadingStyleButton"
                              Margin="0,-8"
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="ReadingThemeButtonClick"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              Icon="FontColor"
                              IsCompact="False"
                              Label="Theme"
                              Padding="0" />
                <AppBarButton x:Uid="RefreshContentButton"
                              x:Name="RefreshContentButton"
                              Margin="0,-8"
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="RefreshContentButtonClick"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              Icon="Refresh"
                              IsCompact="False"
                              Label="Refresh"
                              Padding="0" />
                <AppBarButton x:Uid="ViewInBrowserButton"
                              x:Name="ViewInBrowserButton"
                              Margin="0,-8"
                              VerticalAlignment="Center"
                              BorderBrush="{ThemeResource TransparentBrush}"
                              Click="ViewInBrowserButton_Click"
                              Foreground="{ThemeResource AppBackgroundBrush}"
                              Icon="Globe"
                              IsCompact="False"
                              Label="View in Browser"
                              />
                <!--<AppBarButton Icon="Go" Label="Jump To ..." Click="JumpToAppBarButton_Click" />-->

            </CommandBar.SecondaryCommands>
        </CommandBar>
    </Page.BottomAppBar>

    <Grid x:Name="LayoutRoot" Background="{Binding Background}">
        <Grid.ChildrenTransitions>
            <TransitionCollection>
                <EntranceThemeTransition IsStaggeringEnabled="True" />
            </TransitionCollection>
        </Grid.ChildrenTransitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition x:Name="ContentRow" Height="*" />
        </Grid.RowDefinitions>

        <!--  Back button and page title  -->
        <Grid x:Name="ContentRegion"
              Grid.Row="1"
              Grid.Column="0"
              Margin="0,0,0,0"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              CommonNavigationTransitionInfo.IsStaggerElement="False"
              ContinuumNavigationTransitionInfo.IsEntranceElement="True"
              ContinuumNavigationTransitionInfo.IsExitElement="True">
            <Grid.RenderTransform>
                <TranslateTransform x:Name="ContentPanelTranslation" X="0" Y="0" />
            </Grid.RenderTransform>
            <ListView x:Name="ContentListView"
                      Grid.ColumnSpan="2"
                      Margin="0,0,0,0"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      ContainerContentChanging="ContentListView_ContainerContentChanging"
                      ContinuumNavigationTransitionInfo.ExitElementContainer="True"
                      FontFamily="{Binding FontFamily}"
                      FontSize="{Binding FontSize}"
                      Foreground="{Binding Foreground}"
                      IsDoubleTapEnabled="False"
                      IsHoldingEnabled="False"
                      IsItemClickEnabled="True"
                      IsRightTapEnabled="False"
                      IsSwipeEnabled="False"
                      ItemClick="ContentListView_ItemClick"
                      ItemTemplate="{StaticResource LineViewCCGTemplate}"
                      ItemsSource="{Binding Contents}"
                      Language="zh-Hans"
                      Padding="0,0,0,0"
                      SelectionMode="None">
                <!--<ListView.ItemContainerTransitions>
                    <TransitionCollection>
                        <EntranceThemeTransition/>
                    </TransitionCollection>
                </ListView.ItemContainerTransitions>-->
                <ListView.Header>

                    <Button x:Name="VerticalPrevButton"
                            Height="60"
                            MinHeight="50"
                            HorizontalAlignment="Left"
                            HorizontalContentAlignment="Stretch"
                            Background="{ThemeResource AppAccentBrush}"
                            BorderBrush="Transparent"
                            BorderThickness="0"
                            Click="PrevChapterButton_Click"
                            Foreground="{ThemeResource AppBackgroundBrush}"
                            Opacity="1"
                            Padding="0">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Grid>
                                    <Path x:Name="Arc"
                                          Width="120"
                                          Height="60"
                                          HorizontalAlignment="Left"
                                          Data="M0,0 V60 H60 L120,0 Z"
                                          Fill="{TemplateBinding Background}" />
                                    <Path x:Name="Arrow"
                                          Width="30"
                                          Height="20"
                                          Margin="25,0,0,0"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Center"
                                          Data="M5.63,0 L11.11,5.55 L11.05,9.67 L5.64,4.12 L0.23,9.67 L0.17,5.55 z"
                                          Fill="{TemplateBinding Foreground}"
                                          Stretch="Fill" />
                                    <TextBlock Margin="100,0,20,0"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Center"
                                               FontSize="{ThemeResource AppFontSizeLarge}"
                                               Foreground="{ThemeResource AppAccentBrush}"
                                               Text="{Binding ChapterHeader}"
                                               TextTrimming="CharacterEllipsis"
                                               TextWrapping="NoWrap" />
                                </Grid>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </ListView.Header>
                <ListView.Footer>
                    <Button x:Name="VerticalNextButton"
                            Height="80"
                            MinHeight="30"
                            HorizontalAlignment="Left"
                            Background="{ThemeResource AppAccentBrush}"
                            BorderBrush="Transparent"
                            BorderThickness="0"
                            Click="NextChapterButton_Click"
                            Foreground="{ThemeResource AppBackgroundBrush}"
                            Opacity="1">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Grid>
                                    <!--<Path x:Name="Arc"
                                          Width="120"
                                          Height="60"
                                          HorizontalAlignment="Right"
                                          Data="M0,60 H120 V0 H60 Z"
                                          Fill="{TemplateBinding Background}" />-->
                                    <Path x:Name="Arc"
                                          Width="140"
                                          Height="80"
                                          HorizontalAlignment="Left"
                                          Data="M0,0 V80 H140 L60,0 Z"
                                          Fill="{TemplateBinding Background}" />
                                    <Path x:Name="Arrow"
                                          Width="30"
                                          Height="20"
                                          Margin="25,20,25,0"
                                          HorizontalAlignment="Left"
                                          VerticalAlignment="Top"
                                          Data="M0.06,0 L5.47,5.56 L10.88,0 L10.94,4.12 L5.48,9.67 L0,4.12 z"
                                          Fill="{TemplateBinding Foreground}"
                                          Stretch="Fill" />
                                    <TextBlock Margin="100,10,20,10"
                                               HorizontalAlignment="Left"
                                               VerticalAlignment="Top"
                                               FontSize="{ThemeResource AppFontSizeLarge}"
                                               Foreground="{ThemeResource AppAccentBrush}"
                                               Text="{Binding NextChapterHeader}"
                                               TextTrimming="CharacterEllipsis"
                                               TextWrapping="NoWrap" />
                                </Grid>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </ListView.Footer>
                <!--<ListView.ItemTemplate>
                    <DataTemplate d:DataType="{system:Type vm:LineViewModel}">
                        <TextBlock Text="{Binding Content}"></TextBlock>
                -->
                <!--<controls:ExpanderView  Margin="0,0,0,0"
                                                Header="{Binding}"
                                                NonExpandableHeader="{Binding}"
                                                ItemsSource="{Binding Comments}"
                                                IsNonExpandable="{Binding HasNoComment}"
                                                HorizontalAlignment="Stretch"
                                                HorizontalContentAlignment="Left"
                                                HeaderTemplate="{StaticResource LineViewTemplateSelectorTemplate}"
                                                NonExpandableHeaderTemplate="{StaticResource LineViewTemplateSelectorTemplate}">
                            <controls:ExpanderView.ItemTemplate>
                                <DataTemplate>
                                    <ListBoxItem>
                                        <TextBlock Text="{Binding Content}"
                                                           TextWrapping="Wrap"
                                                           Margin="0,0,0,0"
                                                           Foreground="{ThemeResource AppSubtleBrush}"
                                                           FontSize="{ThemeResource AppFontSizeSmall}"
                                                           FontWeight="SemiLight"/>
                                    </ListBoxItem>
                                </DataTemplate>
                            </controls:ExpanderView.ItemTemplate>
                        </controls:ExpanderView>-->
                <!--
                    </DataTemplate>
                </ListView.ItemTemplate>-->
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="ListViewItem">
                                    <ContentPresenter x:Name="contentPresenter"
                                                      Margin="{TemplateBinding Padding}"
                                                      VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      Content="{TemplateBinding Content}"
                                                      ContentTemplate="{TemplateBinding ContentTemplate}"
                                                      ContentTransitions="{TemplateBinding ContentTransitions}" />
                                    <!--<Grid                                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                        <Rectangle DataContext="{TemplateBinding Content}" Width="5" HorizontalAlignment="Left" Fill="{ThemeResource AppAccentBrush}" Visibility="{Binding HasComments,Converter={StaticResource BooleanToVisibilityConverter}}"/>
/>
                                    </Grid>-->
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Grid>

        <Grid x:Name="IndexPanel"
              Grid.Row="1"
              Grid.Column="0"
              Width="330"
              HorizontalAlignment="Left"
              VerticalAlignment="Stretch"
              Background="{ThemeResource AppAccentBrushSemiLight}"
              Visibility="Collapsed">
            <Grid.RenderTransform>
                <TranslateTransform x:Name="IndexPanelTranslation" X="-330" />
            </Grid.RenderTransform>

            <!--<Grid.Transitions>
                <TransitionCollection>
                    <EdgeUIThemeTransition Edge="Left" />
                </TransitionCollection>
            </Grid.Transitions>-->

            <ListView x:Name="VolumeListView"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      AutomationProperties.AutomationId="ItemsListView"
                      AutomationProperties.Name="Items"
                      ContinuumNavigationTransitionInfo.ExitElementContainer="True"
                      IsItemClickEnabled="True"
                      ItemClick="ChapterListView_ItemClick"
                      ItemsSource="{Binding Source={StaticResource VolumesViewSource}}"
                      Padding="10,0,0,20"
                      ScrollViewer.IsVerticalScrollChainingEnabled="False"
                      SelectionMode="Single"
                      TabIndex="1">
                <ListView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <Grid Width="300"
                                      Height="100"
                                      MaxWidth="300"
                                      Margin="0,6,6,6"
                                      ManipulationDelta="IndexPanel_ManipulationDelta"
                                      ManipulationMode="TranslateX,System"
                                      Tapped="VolumeIndexItem_Tapped">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="20" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="5" />
                                        <RowDefinition Height="36" />
                                        <RowDefinition Height="*" />
                                    </Grid.RowDefinitions>
                                    <Border Grid.RowSpan="3"
                                            Width="80"
                                            Margin="0,0,0,0"
                                            Background="{ThemeResource ListViewItemPlaceholderBackgroundThemeBrush}">
                                        <Image AutomationProperties.Name="{Binding Title}"
                                               Source="{Binding CoverImageUri}"
                                               Stretch="UniformToFill" />
                                    </Border>
                                    <Ellipse Grid.Row="1"
                                             Grid.Column="2"
                                             Width="36"
                                             Height="36"
                                             HorizontalAlignment="Left"
                                             Fill="{ThemeResource AppAccentBrush}"
                                             StrokeThickness="0" />
                                    <Ellipse Grid.Row="1"
                                             Grid.Column="2"
                                             Width="36"
                                             Height="36"
                                             HorizontalAlignment="Right"
                                             Fill="{ThemeResource AppAccentBrush}"
                                             StrokeThickness="0" />
                                    <Rectangle Grid.Row="1"
                                               Grid.Column="2"
                                               Height="36"
                                               Margin="18,0"
                                               HorizontalAlignment="Stretch"
                                               Fill="{ThemeResource AppAccentBrush}"
                                               StrokeThickness="0" />
                                    <TextBlock Grid.Row="1"
                                               Grid.Column="2"
                                               MinWidth="18"
                                               Margin="9,0"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="{ThemeResource AppBackgroundBrush}"
                                               Language="zh-Hans"
                                               Style="{ThemeResource AppTextTitle3Style}"
                                               Text="{Binding Label}"
                                               TextAlignment="Center"
                                               TextWrapping="NoWrap" />

                                    <TextBlock Grid.Row="2"
                                               Grid.Column="2"
                                               Grid.ColumnSpan="2"
                                               VerticalAlignment="Center"
                                               Language="zh-Hans"
                                               Style="{ThemeResource AppTextTitle2Style}"
                                               Text="{Binding Title}"
                                               TextWrapping="WrapWholeWords" />
                                </Grid>
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                    </GroupStyle>
                </ListView.GroupStyle>
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid Width="300"
                              ManipulationDelta="IndexPanel_ManipulationDelta"
                              ManipulationMode="TranslateX,System">
                            <Rectangle Width="5"
                                       Margin="0"
                                       HorizontalAlignment="Left"
                                       VerticalAlignment="Stretch"
                                       Fill="{ThemeResource AppAccentBrush}"
                                       StrokeThickness="0"
                                       Visibility="{Binding IsDownloaded,
                                                            Converter={StaticResource BooleanToVisibilityConverter}}" />
                            <TextBlock Width="260"
                                       Margin="20,4,0,4"
                                       HorizontalAlignment="Left"
                                       FontSize="{ThemeResource AppFontSizeMediumLarge}"
                                       Foreground="{ThemeResource ContentForegroundBrush}"
                                       Text="{Binding Title}"
                                       TextTrimming="WordEllipsis" />
                        </Grid>
                    </DataTemplate>
                </ListView.ItemTemplate>
                <ListView.ItemContainerStyle>
                    <Style TargetType="ListViewItem">
                        <Setter Property="Margin" Value="0,2,0,2" />
                        <Setter Property="Padding" Value="0,0" />
                        <Setter Property="Template" Value="{StaticResource ListViewItemTemplate}" />
                    </Style>
                </ListView.ItemContainerStyle>
            </ListView>
        </Grid>
        <!--<Grid Grid.Row="1" Width="200" Height="300" >
            <ProgressBar VerticalAlignment="Stretch" Background="{ThemeResource AppAccentBrushLight}" Maximum="1" Minimum="0" Value="0.5" Foreground="{ThemeResource AppAccentBrush}"></ProgressBar>
            <Path Fill="{ThemeResource AppBackgroundBrush}" Stretch="Fill"  Data="M 19.324219 13.378906 L 19.324219 62.15625 L 59.089844 62.15625 L 59.089844 13.378906 L 19.324219 13.378906 z M 22.300781 15.90625 L 56.300781 15.90625 L 56.300781 59.90625 L 22.300781 59.90625 L 22.300781 15.90625 z M 25.300781 18.90625 L 25.300781 56.90625 L 53.300781 56.90625 L 53.300781 18.90625 L 25.300781 18.90625 z M 27.300781 20.90625 L 34.966797 20.90625 C 35.096997 21.41225 35.384766 22.277419 35.384766 22.824219 C 35.384766 26.322019 32.548581 29.15625 29.050781 29.15625 C 28.503981 29.15625 27.806781 29.03645 27.300781 28.90625 L 27.300781 20.90625 z M 43.216797 38.740234 L 47.966797 43.490234 L 51.300781 39.90625 L 51.300781 54.90625 L 27.300781 54.90625 L 43.216797 38.740234 z "></Path>
        </Grid>-->
        <Button x:Name="AppBarHint"
                Grid.Row="1"
                Grid.ColumnSpan="2"
                Height="25"
                MinHeight="25"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Bottom"
                Click="AppBarHint_Click"
                ManipulationMode="TranslateY"
                ManipulationDelta="AppBarHintButton_ManipulationDelta"
                Foreground="{ThemeResource AppAccentBrush}"
                Style="{StaticResource PureButtonStyle}">
            <SymbolIcon Margin="0,0"
                        Width="50"
                        HorizontalAlignment="Right"
                        Foreground="{ThemeResource AppAccentBrush}"
                        Symbol="More" />
        </Button>
        <Grid x:Name="TitlePanel"
              Height="40"
              Style="{StaticResource TitlePanelStyle}">
            <Grid.RenderTransform>
                <TranslateTransform />
            </Grid.RenderTransform>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="40" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="40" />
            </Grid.ColumnDefinitions>

            <ToggleButton x:Uid="IndexButton"
                          x:Name="IndexButton"
                          Grid.Row="1"
                          Grid.Column="0"
                          Grid.ColumnSpan="1"
                          Width="20"
                          Height="20"
                          MinWidth="20"
                          MinHeight="20"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Center"
                          HorizontalContentAlignment="Left"
                          VerticalContentAlignment="Center"
                          Background="Transparent"
                          BorderBrush="Transparent"
                          BorderThickness="0"
                          Click="IndexButton_Click"
                          Foreground="{StaticResource AppBackgroundBrush}"
                          IsChecked="{Binding IsIndexPanelOpen,
                                              ElementName=pageRoot,
                                              Mode=OneWay}"
                          Padding="0,-10"
                          ToolTipService.ToolTip="Open/Close the index panel">

                <Viewbox Width="40"
                         Height="40"
                         Margin="0"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center">
                    <SymbolIcon Margin="3" Symbol="List" />
                </Viewbox>
            </ToggleButton>
            <TextBlock x:Name="pageTitle"
                       Grid.Column="1"
                       Margin="10,0"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       FontSize="30"
                       FontWeight="SemiLight"
                       Foreground="{StaticResource AppBackgroundBrush}"
                       IsHitTestVisible="false"
                       Language="zh-Hans"
                       Text="{Binding Header}"
                       TextAlignment="Left"
                       TextTrimming="WordEllipsis"
                       TextWrapping="NoWrap" />
            <!--<Button Grid.Row="0"
                    Grid.Column="2"
                    MinWidth="10"
                    MinHeight="10"
                    Margin="0,0,0,-20"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Click="FullScreenButton_Click"
                    Padding="0,23,0,25"
                    Style="{StaticResource PureButtonStyle}">
                <Path x:Name="FullScreenButtonIcon" HorizontalAlignment="Center"
                      Data="F1 M 37.8516,35.625L 34.6849,38.7917L 23.6016,50.2708L 23.6016,39.9792L 37.8516,24.9375L 52.1016,39.9792L 52.1016,50.2708L 41.0182,38.7917L 37.8516,35.625 Z "
                      Fill="{ThemeResource AppBackgroundBrush}"
                      Stretch="Uniform" RenderTransformOrigin="0.5,0.5" >
                    <Path.RenderTransform>
                        <CompositeTransform Rotation="0"></CompositeTransform>
                    </Path.RenderTransform>
                </Path>
            </Button>-->



        </Grid>

        <Rectangle x:Name="SlideHandle"
                   Grid.Row="1"
                   MinWidth="30"
                   Margin="0"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Stretch"
                   Fill="Transparent"
                   ManipulationDelta="SlideHandle_ManipulationDelta"
                   ManipulationMode="TranslateX"
                   Opacity="0"
                   Stroke="Transparent"
                   StrokeThickness="0"
                   Tapped="IndexButton_Click" />
        <ProgressBar x:Name="LoadingIndicator"
                     Grid.Row="1"
                     Grid.Column="0"
                     Grid.ColumnSpan="2"
                     Margin="0,0,0,0"
                     HorizontalAlignment="Stretch"
                     VerticalAlignment="Top"
                     Foreground="{ThemeResource AppAccentBrush}"
                     IsIndeterminate="True"
                     Maximum="1"
                     Minimum="0"
                     Visibility="Collapsed" />
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="LoadingStates">
                <VisualState x:Name="Ready" />
                <VisualState x:Name="Loading">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:0"
                                         Storyboard.TargetName="VerticalPrevButton"
                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                         To="0.0" />
                        <DoubleAnimation Duration="0:0:0"
                                         Storyboard.TargetName="VerticalNextButton"
                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                         To="0.0" />
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LoadingIndicator" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation Duration="0:0:00"
                                         Storyboard.TargetName="ContentRegion"
                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                         To="0.0" />
                        <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="LoadingIndicator" Storyboard.TargetProperty="IsActive">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="True" />
                        </ObjectAnimationUsingKeyFrames>-->
                        <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed" />
                        </ObjectAnimationUsingKeyFrames>-->
                    </Storyboard>
                </VisualState>
                <VisualStateGroup.Transitions>
                    <VisualTransition From="Ready" To="Loading">
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)">
                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.00"
                                                      Value="0" />
                                <EasingDoubleKeyFrame x:Name="ReadyToLoadingEndingFrame"
                                                      EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.4"
                                                      Value="-640" />
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.0"
                                             Storyboard.TargetName="VerticalPrevButton"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="0.0" />
                            <DoubleAnimation Duration="0:0:0.0"
                                             Storyboard.TargetName="VerticalNextButton"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="0.0" />
                            <DoubleAnimation Duration="0:0:0.4"
                                             Storyboard.TargetName="ContentRegion"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="0.0" />
                            <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.4" Value="Collapsed" />
                            </ObjectAnimationUsingKeyFrames>-->
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LoadingIndicator" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible" />
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualTransition>
                    <VisualTransition From="Loading" To="Ready">
                        <Storyboard>
                            <DoubleAnimation Duration="0:0:0.4"
                                             From="0"
                                             Storyboard.TargetName="VerticalPrevButton"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="1" />
                            <DoubleAnimation Duration="0:0:0.4"
                                             From="0"
                                             Storyboard.TargetName="VerticalNextButton"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="1" />
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)">
                                <EasingDoubleKeyFrame x:Name="LoadingToReadyIntialFrame"
                                                      EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.00"
                                                      Value="640" />
                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.4"
                                                      Value="0" />
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.4"
                                             From="0"
                                             Storyboard.TargetName="ContentRegion"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="1.0" />
                            <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Visible" />
                            </ObjectAnimationUsingKeyFrames>-->
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="LoadingIndicator" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed" />
                            </ObjectAnimationUsingKeyFrames>
                        </Storyboard>
                    </VisualTransition>
                </VisualStateGroup.Transitions>
            </VisualStateGroup>
            <VisualStateGroup x:Name="FullScreenStates">
                <VisualState x:Name="ShowTitleBarState" />
                <VisualState x:Name="HideTitleBarState">
                    <Storyboard>
                        <!--<ColorAnimation Storyboard.TargetName="PageBottomCommandBar" Storyboard.TargetProperty="(UIElement.Foreground).(SolidColorBrush.Color)" To="{ThemeResource AppAccentColor}"/>
                    <ColorAnimation Storyboard.TargetName="PageBottomCommandBar" Storyboard.TargetProperty="(UIElement.Background).(SolidColorBrush.Color)" To="Transparent"/>-->
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation Duration="0"
                                         Storyboard.TargetName="TitlePanel"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                         To="-40" />
                        <!--<DoubleAnimation Duration="0:0:0"
                                         Storyboard.TargetName="FullScreenButtonIcon"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)"
                                         To="180" />-->
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="PeekTitleBarState">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation Duration="0"
                                         Storyboard.TargetName="TitlePanel"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                         To="0" />
                    </Storyboard>
                </VisualState>
                <VisualStateGroup.Transitions>
                    <VisualTransition From="ShowTitleBarState"
                                      GeneratedDuration="0:0:0.25"
                                      To="HideTitleBarState">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="TitlePanel"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             To="-40" />
                        </Storyboard>
                    </VisualTransition>
                    <VisualTransition From="HideTitleBarState"
                                      GeneratedDuration="0:0:0.25"
                                      To="ShowTitleBarState">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0" Value="0,0,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="TitlePanel"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             To="0" />
                        </Storyboard>
                    </VisualTransition>
                    <VisualTransition From="PeekTitleBarState"
                                      GeneratedDuration="0:0:0.25"
                                      To="HideTitleBarState">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="TitlePanel"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             To="-40" />
                        </Storyboard>
                    </VisualTransition>
                    <VisualTransition From="HideTitleBarState"
                                      GeneratedDuration="0:0:0.25"
                                      To="PeekTitleBarState">
                        <Storyboard>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="0,-40,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="TitlePanel"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             To="0" />
                        </Storyboard>
                    </VisualTransition>
                    <VisualTransition From="PeekTitleBarState"
                                      GeneratedDuration="0:0:0.25"
                                      To="ShowTitleBarState">
                        <Storyboard>
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="ContentRegion"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             From="0"
                                             To="40" />
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="IndexPanel"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             From="0"
                                             To="40" />
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.25" Value="0,0,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(FrameworkElement.Margin)">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.25" Value="0,0,0,0" />
                            </ObjectAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="TitlePanel"
                                             Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.Y)"
                                             To="0" />
                        </Storyboard>
                    </VisualTransition>
                </VisualStateGroup.Transitions>
            </VisualStateGroup>
            <VisualStateGroup x:Name="IndexPanelStates">
                <VisualState x:Name="IndexClosed">
                    <!--<Storyboard>

                    -->
                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="Collapsed" />
                        </ObjectAnimationUsingKeyFrames>
                    -->
                    <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="IsOpen">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="False" />
                        </ObjectAnimationUsingKeyFrames>-->
                    <!--

                        <DoubleAnimation Duration="0"
                                         Storyboard.TargetName="IndexPanel"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                         To="-330" />-->
                    <!--<DoubleAnimation Duration="0"
                                         Storyboard.TargetName="IndexPanel"
                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                         To="0.0" />-->
                    <!--
                    </Storyboard>-->
                </VisualState>
                <VisualState x:Name="IndexOpen">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="Visibility">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                        </ObjectAnimationUsingKeyFrames>
                        <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="IsOpen">
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="True" />
                        </ObjectAnimationUsingKeyFrames>-->
                        <DoubleAnimation Duration="0"
                                         Storyboard.TargetName="IndexPanel"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                         To="0" />
                        <DoubleAnimation Duration="0"
                                         Storyboard.TargetName="ContentRegion"
                                         Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)"
                                         To="330" />
                        <DoubleAnimation Duration="0"
                                         Storyboard.TargetName="IndexPanel"
                                         Storyboard.TargetProperty="(UIElement.Opacity)"
                                         To="1.0" />
                    </Storyboard>
                </VisualState>
                <VisualStateGroup.Transitions>
                    <VisualTransition From="IndexClosed"
                                      GeneratedDuration="0:0:25"
                                      To="IndexOpen">
                        <Storyboard x:Name="IndexOpenStoryBoard">
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0" Value="Visible" />
                            </ObjectAnimationUsingKeyFrames>
                            <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="IsOpen">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="True" />
                            </ObjectAnimationUsingKeyFrames>-->
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                                <EasingDoubleKeyFrame x:Name="IndexCollapsedToExpandedKeyFrame"
                                                      EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.00"
                                                      Value="-330" />
                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.25"
                                                      Value="0" />
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                                <EasingDoubleKeyFrame x:Name="ContentCollapsedToExpandedKeyFrame"
                                                      EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.00"
                                                      Value="0" />
                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.25"
                                                      Value="330" />
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimation Duration="0:0:0.25"
                                             From="0"
                                             Storyboard.TargetName="IndexPanel"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="1.0" />
                        </Storyboard>
                    </VisualTransition>
                    <VisualTransition From="IndexOpen"
                                      GeneratedDuration="0:0:0.25"
                                      To="IndexClosed">
                        <Storyboard x:Name="IndexCloseStoryBoard">
                            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="Visibility">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.25" Value="Collapsed" />
                            </ObjectAnimationUsingKeyFrames>
                            <!--<ObjectAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="IsOpen">
                                <DiscreteObjectKeyFrame KeyTime="0:0:0.25" Value="False" />
                            </ObjectAnimationUsingKeyFrames>-->
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="IndexPanel" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                                <EasingDoubleKeyFrame x:Name="IndexExpandedToCollapsedStartKeyFrame"
                                                      EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.00"
                                                      Value="0" />
                                <EasingDoubleKeyFrame x:Name="IndexExpandedToCollapsedKeyFrame"
                                                      EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.25"
                                                      Value="-330" />
                            </DoubleAnimationUsingKeyFrames>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetName="ContentRegion" Storyboard.TargetProperty="(UIElement.RenderTransform).(TranslateTransform.X)">
                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.00"
                                                      Value="330" />
                                <EasingDoubleKeyFrame EasingFunction="{StaticResource QuadraticEaseOut}"
                                                      KeyTime="0:0:0.25"
                                                      Value="0" />
                            </DoubleAnimationUsingKeyFrames>
                            <!--<DoubleAnimation Duration="0:0:0.25"
                                             Storyboard.TargetName="IndexPanel"
                                             Storyboard.TargetProperty="(UIElement.Opacity)"
                                             To="0.0" />-->
                        </Storyboard>
                    </VisualTransition>
                </VisualStateGroup.Transitions>
            </VisualStateGroup>

        </VisualStateManager.VisualStateGroups>

    </Grid>


</Page>
